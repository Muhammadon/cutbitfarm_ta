@* 1. INI WAJIB: Biar View tau dia menerima data Produk *@
@model Cutbitfarm.Models.Product

@{
    ViewData["Title"] = "Form Pemesanan";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg rounded-4">
                <div class="card-header bg-success text-white text-center rounded-top-4">
                    <h4>Formulir Pemesanan</h4>
                </div>
                
                <div class="text-center mb-4">
                    <img src="@Url.Content(Model.ImageUrl)"
                         class="img-fluid rounded shadow"
                         style="max-width: 300px; height: auto; padding-top:20px"
                         alt="@Model.Name" />
                    
                    <h5 class="mt-3">@Model.Name</h5>
                </div>

                <div class="card-body p-4">
                    <form id="orderForm">
                        <div class="mb-3">
                            <label for="productName" class="form-label">Nama Produk</label>
                            <input type="text" class="form-control" id="productName" value="@Model.Name" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="harga" class="form-label">Harga</label>
                            <input type="text" class="form-control" id="harga" value="@Model.Price.ToString("C0", new System.Globalization.CultureInfo("id-ID"))" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="customerName" class="form-label">Nama Pemesan</label>
                            <input type="text" class="form-control" id="customerName" placeholder="Masukkan nama Anda" required>
                        </div>

                        <div class="mb-3">
                            <label for="customerPhone" class="form-label">No. WhatsApp</label>
                            <input type="number" class="form-control" id="customerPhone" placeholder="628xxxxxxxx" required>
                        </div>

                        <div class="mb-3">
                            <label for="address" class="form-label">Alamat Pengiriman</label>
                            <textarea class="form-control" id="address" rows="3" placeholder="Masukkan alamat lengkap" required></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="quantity" class="form-label">Jumlah Pesanan</label>
                            <input type="number" class="form-control" id="quantity" value="1" min="1">
                        </div>

                        <div class="mb-3">
                            <label for="notes" class="form-label">Catatan Tambahan</label>
                            <textarea class="form-control" id="notes" rows="2" placeholder="Catatan (opsional)"></textarea>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="button" onclick="kirimKeWhatsapp()" class="btn btn-success btn-lg">
                                <i class="bi bi-whatsapp"></i> Kirim Pesanan
                            </button>
                            <a asp-action="Products" class="btn btn-secondary">Kembali ke Katalog</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function kirimKeWhatsapp() {
        // Ambil nilai dari inputan
        var produk = document.getElementById("productName").value;
        var harga = document.getElementById("harga").value;
        var nama = document.getElementById("customerName").value;
        var alamat = document.getElementById("address").value;
        var jumlah = document.getElementById("quantity").value;
        var catatan = document.getElementById("notes").value;

        // Validasi sederhana
        if (nama === "" || alamat === "") {
            alert("Harap isi Nama dan Alamat!");
            return;
        }

        // Format Pesan WA
        // %0a artinya Enter (Garis baru)
        var teks = `Halo Admin Cutbitfarm, saya mau pesan:%0a%0a` +
                   `Produk: *${produk}*%0a` +
                   `Harga: ${harga}%0a` +
                   `Jumlah: ${jumlah}%0a` +
                   `------------------------%0a` +
                   `Nama: ${nama}%0a` +
                   `Alamat: ${alamat}%0a` +
                   `Catatan: ${catatan}`;

        // Ganti nomor ini dengan nomor WA Bos Anda
        var nomorWA = "6281361208447"; 

        // Buka WhatsApp
        window.open(`https://wa.me/${nomorWA}?text=${teks}`, '_blank');
    }
</script>

@* <div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg rounded-4">
                <div class="card-header bg-success text-white text-center rounded-top-4">
                    <h4>Formulir Pemesanan</h4>
                </div>
                <!-- Gambar Produk -->
                <div class="text-center mb-4">
                    <img src="~/images/ayamekorlidi3.jpg"
                         class="img-fluid rounded shadow"
                         style="max-width: 300px; height: auto;padding-top:20px"
                         alt="Produk Ayam Ekor Lidi" />
                    <h5 class="mt-3">Ayam Ekor Lidi Super</h5>
                </div>
                <div class="card-body p-4">
                    <form>
                        <div class="mb-3">
                            <label for="productName" class="form-label">Nama Produk</label>
                            <input type="text" class="form-control" id="productName" value="Ayam Ekor Lidi" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="harga" class="form-label">Harga</label>
                            <input type="text" class="form-control" id="harga" value="400000" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="customerName" class="form-label">Nama Pemesan</label>
                            <input type="text" class="form-control" id="customerName" placeholder="Masukkan nama Anda">
                        </div>

                        <div class="mb-3">
                            <label for="customerPhone" class="form-label">No. Telepon</label>
                            <input type="text" class="form-control" id="customerPhone" placeholder="0812xxxxxxx">
                        </div>

                        <div class="mb-3">
                            <label for="address" class="form-label">Alamat Pengiriman</label>
                            <textarea class="form-control" id="address" rows="3" placeholder="Masukkan alamat lengkap"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="quantity" class="form-label">Jumlah Pesanan</label>
                            <input type="number" class="form-control" id="quantity" value="1" min="1">
                        </div>

                        <div class="mb-3">
                            <label for="notes" class="form-label">Catatan Tambahan</label>
                            <textarea class="form-control" id="notes" rows="2" placeholder="Catatan (opsional)"></textarea>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-success btn-lg">Kirim Pesanan</button>
                            <a href="/Home/Katalog" class="btn btn-secondary">Kembali ke Katalog</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div> *@